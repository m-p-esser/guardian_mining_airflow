# Guardian API related Parameters
guardian_api:
  base_url: 'http://content.guardianapis.com/search'
  order_by: 'oldest'
  show_fields: 'all'
  show_tags: 'all'
  page_size: 200

######################################################################################################

# Parameters for transforming/cleaning/conforming data

guardian_content:
  json_normalize:  # see pd.json_normalize
    sep: _
  clean:
    drop_columns:  # which columns should be dropped
      - tags
      - fields_bodyText
      - fields_bylineHtml
      - fields_isInappropriateForSponsorship
      - fields_shortUrl
      - fields_thumbnail
      - fields_legallySensitive
      - sectionId
      - pillarId
      - fields_starRating
      - fields_sensitive
      - fields_displayHint
    duplicate_identifier:
      id
    html_columns:  # which columns contain html that needs to be removed, in camelCase
      - fields_trailText
      - fields_standfirst
      - fields_main
      - fields_body
    date_columns:  # which columns should be a date, in camelCase
      - webPublicationDate
      - fields_firstPublicationDate
      - fields_lastModified
      - fields_commentCloseDate
      - fields_newspaperEditionDate
    bool_columns:
      - fields_isPremoderated
      - fields_commentable
      - fields_shouldHideAdverts
      - isHosted
      - fields_showInRelatedContent
      - fields_showAffiliateLinks
    prefixes_to_remove:
      - fields_
    rename_columns_mapping:  # key -> old name, value -> new name, keys in snake_case
      byline: authors
      section_name: section
      pillar_name: pillar
      main: cover_image_caption
      id: web_url_suffix  # primary key
      lang: language
      wordcount: word_count
  conform:
    article: 
      keep_columns: # which columns should be kept, needs be columns which are also in the data model 
      - web_title
      - web_url_suffix
      - pillar
      - section
      - authors
      - type
      - language
      - web_publication_date
      - newspaper_edition_date
      - first_publication_date
      - newspaper_page_number
      - production_office
      - publication
      - word_count
      - char_count
      - web_url
    article_text:
      keep_columns: # which columns should be kept, needs be columns which are also in the data model      
        - web_title
        - web_url_suffix
        - headline
        - trail_text
        - standfirst
        - cover_image_caption
        - body 
    article_setting:
      keep_columns: # which columns should be kept, needs be columns which are also in the data model
        - web_title
        - web_url_suffix
        - is_premoderated
        - commentable
        - comment_close_date
        - should_hide_adverts
        - is_hosted
        - show_in_related_content
        - show_affiliate_links


######################################################################################################

# Parameters for transforming/cleaning/conforming data

guardian_content_tags:
  json_normalize:  # see pd.json_normalize
    sep: _
    record_path: tags
    record_prefix: tags_
    meta: id
    meta_prefix: content_
  clean:
    drop_columns:  # which columns should be dropped, in camelCase
      - tags_references
      - tags_activeSponsorships
      - tags_bio
      - tags_bylineImageUrl
      - tags_bylineLargeImageUrl
      - tags_sectionId
      - tags_twitterHandle
      - tags_emailAddress
      - tags_webUrl
      - tags_apiUrl
      - tags_description
    html_columns: null # which columns contain html that needs to be removed, in camelCase
    prefixes_to_remove:
      - tags_
    rename_columns_mapping:  # key -> old name, value -> new name, keys in snake_case
      id: tag_long
      web_title: tag
      section_name: section
  conform:
    tag_keyword:
      type: keyword  # what type reflects this tag?
      drop_columns:  # which columns should be dropped
        - first_name
        - last_name
    tag_contributor:
      type: contributor
      drop_columns:
        - section
    tag_tracking:
      type: tracking
      drop_columns:
        - first_name
        - last_name
    tag_tone:
      type: tone
      drop_columns:
        - first_name
        - last_name
        - section
    tag_series:
      type: series
      drop_columns:
        - first_name
        - last_name
    tag_newspaper_book:
      type: newspaper-book
      drop_columns:
        - first_name
        - last_name
    tag_newspaper_book_section:
      type: newspaper-book-section
      drop_columns:
        - first_name
        - last_name
